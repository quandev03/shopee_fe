{"ast":null,"code":"var _jsxFileName = \"/Volumes/MAC_Quandev03/Code/JS/ShopeeClone/ShopeeClone/src/pages/ProductDetail/ProductDetail.tsx\",\n  _s = $RefreshSig$();\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport DOMPurify from 'dompurify';\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { productApi } from 'src/api/product.api';\nimport { purchasesApi } from 'src/api/purchases.api';\nimport ToastSuccess from 'src/components/CustomToast/ToastSuccess';\nimport ProductRating from 'src/components/ProductRating';\nimport QuantityController from 'src/components/QuantityController';\nimport { path } from 'src/constants/path';\nimport { purchasesStatus } from 'src/constants/purchases';\nimport { formatCurrency, formatNumberToSocialStyle, getIdFromNameId, saleRate } from 'src/utils/utils';\nimport Product from '../ProductList/components/Product';\nimport { useTranslation } from 'react-i18next';\nimport { Helmet } from 'react-helmet-async';\nimport { convert } from 'html-to-text';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ProductDetail() {\n  _s();\n  const {\n    t\n  } = useTranslation('product');\n  const {\n    nameId\n  } = useParams();\n  const navigate = useNavigate();\n  const id = getIdFromNameId(nameId);\n  const queryClient = useQueryClient();\n  const {\n    data: productDetailData\n  } = useQuery({\n    queryKey: ['product', id],\n    queryFn: () => {\n      return productApi.getProduct(id);\n    }\n  });\n  const [showToastSuccess, setShowToastSuccess] = useState(false);\n  const [buyCount, setBuyCount] = useState(1);\n  const product = productDetailData === null || productDetailData === void 0 ? void 0 : productDetailData.data.data;\n  const queryConfig = {\n    page: '1',\n    limit: '20',\n    category: product === null || product === void 0 ? void 0 : product.category._id\n  };\n  const {\n    data: productList\n  } = useQuery({\n    queryKey: ['productListCategory', queryConfig],\n    queryFn: () => {\n      return productApi.getProductList(queryConfig);\n    },\n    enabled: Boolean(product)\n  });\n  const imageRef = useRef(null);\n  const [currentImagesIndex, setCurrentImageIndex] = useState([0, 5]);\n  const [imageActived, setImageActived] = useState('');\n  const currentImagesList = useMemo(() => {\n    return product === null || product === void 0 ? void 0 : product.images.slice(...currentImagesIndex);\n  }, [product, currentImagesIndex]);\n  const addToCartMutation = useMutation({\n    mutationFn: body => {\n      return purchasesApi.addToCart(body);\n    }\n  });\n  useEffect(() => {\n    if (product && product.images.length) {\n      setImageActived(product.images[0]);\n    }\n  }, [product]);\n  const activeImage = img => {\n    setImageActived(img);\n  };\n  const prevSlice = () => {\n    if (currentImagesIndex[0] <= 0) return;\n    setCurrentImageIndex(prev => [prev[0] - 1, prev[1] - 1]);\n  };\n  const nextSlice = () => {\n    if (currentImagesIndex[1] >= (product === null || product === void 0 ? void 0 : product.images.length)) return;\n    setCurrentImageIndex(prev => [prev[0] + 1, prev[1] + 1]);\n  };\n  const handleImageZoom = event => {\n    const rect = event.currentTarget.getBoundingClientRect();\n    const image = imageRef.current;\n    const {\n      naturalWidth,\n      naturalHeight\n    } = image;\n\n    //Cách 1: Lấy offsetX và offsetY đơn giản trong trường hợp xử lý được bubble event\n    // const { offsetX, offsetY } = event.nativeEvent;\n\n    //Cách 2: Tính toán offsetX và offsetY trong trường hợp không xử lý được bubble event đối với element con, ví dụ trường hợp element con là một component được import bên ngoài vào element cha\n\n    const offsetX = event.pageX - (rect.x + window.scrollX);\n    const offsetY = event.pageY - (rect.y + window.scrollY);\n    const top = offsetY * (1 - naturalHeight / rect.height);\n    const left = offsetX * (1 - naturalWidth / rect.width);\n    image.style.width = naturalWidth + 'px';\n    image.style.height = naturalHeight + 'px';\n    image.style.maxWidth = 'unset';\n    image.style.top = top + 'px';\n    image.style.left = left + 'px';\n  };\n  const handleRemoveZoom = () => {\n    var _imageRef$current;\n    (_imageRef$current = imageRef.current) === null || _imageRef$current === void 0 ? void 0 : _imageRef$current.removeAttribute('style');\n  };\n  const handleChangeQuantity = value => {\n    setBuyCount(value);\n  };\n  const handleAddToCart = body => {\n    addToCartMutation.mutate(body, {\n      onSuccess: () => {\n        // toast.success('Thêm vào giỏ hàng thành công', { autoClose: 1000 });\n        // customToast.renderToastSuccess({ duration: 1000 });\n        setShowToastSuccess(true);\n        queryClient.invalidateQueries({\n          queryKey: ['purchasesCart', {\n            status: purchasesStatus.inCart\n          }]\n        });\n      }\n    });\n  };\n  const buyNow = async body => {\n    const res = await addToCartMutation.mutateAsync(body);\n    const purchase = res.data.data;\n    navigate(path.cart, {\n      state: {\n        purchaseId: purchase._id\n      }\n    });\n  };\n  if (!product) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative bg-gray-100 py-3\",\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: product.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"description\",\n        content: convert(product.description || '', {\n          limits: {\n            maxInputLength: 200\n          }\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container bg-white shadow\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-12 gap-9\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-span-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative w-full cursor-zoom-in overflow-hidden pt-[100%] shadow\",\n            onMouseMove: handleImageZoom,\n            onMouseLeave: handleRemoveZoom,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: imageActived,\n              alt: product.name,\n              className: \"absolute left-0 top-0 h-full w-full  bg-white object-cover\",\n              ref: imageRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative mt-4 grid w-full grid-cols-5 gap-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: prevSlice,\n              className: \"absolute left-0 top-1/2 z-10 h-9 w-5 -translate-y-1/2 bg-gray-200/60 font-semibold text-white\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                strokeWidth: \"{1.5}\",\n                stroke: \"currentColor\",\n                className: \"h-6 w-6\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  d: \"M15.75 19.5L8.25 12l7.5-7.5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this), currentImagesList.map(image => {\n              const isActive = image === imageActived;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative w-full cursor-pointer pt-[100%]\",\n                onMouseEnter: () => activeImage(image),\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: image,\n                  alt: image,\n                  className: \"absolute left-0 top-0 w-full object-contain\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 21\n                }, this), isActive && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute left-0 top-0 h-full w-full border border-orange bg-transparent\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 23\n                }, this)]\n              }, image, true, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 19\n              }, this);\n            }), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: nextSlice,\n              className: \"absolute right-0 top-1/2 z-10 h-9 w-5 -translate-y-1/2 bg-gray-200/60 font-semibold text-white\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                strokeWidth: \"{1.5}\",\n                stroke: \"currentColor\",\n                className: \"h-6 w-6\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  d: \"M8.25 4.5l7.5 7.5-7.5 7.5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-span-7\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-xl font-medium uppercase\",\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"my-4 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mt-1 text-orange underline\",\n                children: product.rating\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(ProductRating, {\n                rating: product.rating,\n                classNameStartFilled: \"h-4 w-4 fill-orange text-orange\",\n                classNameNonStartFilled: \"h-4 w-4 fill-current text-gray-300\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mx-4 h-6 w-[1px] bg-gray-300\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: formatNumberToSocialStyle(product.sold)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-1 text-sm capitalize text-gray-500\",\n                children: t('sold')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center bg-gray-100 px-6 py-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-500 line-through\",\n              children: [\"\\u20AB\", formatCurrency(product.price_before_discount)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ml-3 text-3xl text-orange\",\n              children: [\"\\u20AB\", formatCurrency(product.price)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ml-5 rounded-sm bg-orange px-1 text-sm font-semibold uppercase text-white\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [saleRate(product.price_before_discount, product.price), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 17\n              }, this), t('off')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"capitalize text-gray-500\",\n              children: t('quantity')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(QuantityController, {\n              onDecrease: handleChangeQuantity,\n              onIncrease: handleChangeQuantity,\n              onType: handleChangeQuantity,\n              value: buyCount,\n              max: product.quantity\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ml-5 text-gray-500\",\n              children: [product.quantity, \" \", t('pieces available')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 flex items-center gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                handleAddToCart({\n                  product_id: id,\n                  buy_count: buyCount\n                });\n              },\n              className: \"flex-items-center flex gap-2 rounded-sm border border-orange bg-orange/10 px-5 py-3 capitalize text-orange hover:bg-orange/20\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                strokeWidth: \"{1.5}\",\n                stroke: \"currentColor\",\n                className: \"h-5 w-5\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  d: \"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 17\n              }, this), t('add to cart')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                buyNow({\n                  product_id: id,\n                  buy_count: buyCount\n                });\n              },\n              className: \"rounded-sm bg-orange px-5 py-3 capitalize text-white hover:bg-orange/80\",\n              children: t('buy now')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mt-4 bg-white\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-100/40 p-3 text-lg uppercase\",\n        children: t('product description')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-3 text-sm leading-loose\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          dangerouslySetInnerHTML: {\n            __html: DOMPurify.sanitize(product.description)\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mt-4\",\n      children: productList && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"uppercase text-gray-500\",\n          children: t('you may also like')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8 grid grid-cols-2 gap-4 sm:grid-cols-3 lg:grid-cols-5 xl:grid-cols-6\",\n          children: productList.data.data.products.map(product => /*#__PURE__*/_jsxDEV(Product, {\n            product: product\n          }, product._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastSuccess, {\n      setShow: setShowToastSuccess,\n      show: showToastSuccess,\n      message: \"S\\u1EA3n ph\\u1EA9m \\u0111\\xE3 \\u0111\\u01B0\\u1EE3c th\\xEAm v\\xE0o Gi\\u1ECF h\\xE0ng\",\n      duration: 1500\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 144,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductDetail, \"hkI38/bheC+IuHkK7MLlbfxqsq4=\", false, function () {\n  return [useTranslation, useParams, useNavigate, useQueryClient, useQuery, useQuery, useMutation];\n});\n_c = ProductDetail;\nvar _c;\n$RefreshReg$(_c, \"ProductDetail\");","map":{"version":3,"names":["useMutation","useQuery","useQueryClient","DOMPurify","useEffect","useMemo","useRef","useState","useNavigate","useParams","productApi","purchasesApi","ToastSuccess","ProductRating","QuantityController","path","purchasesStatus","formatCurrency","formatNumberToSocialStyle","getIdFromNameId","saleRate","Product","useTranslation","Helmet","convert","jsxDEV","_jsxDEV","ProductDetail","_s","t","nameId","navigate","id","queryClient","data","productDetailData","queryKey","queryFn","getProduct","showToastSuccess","setShowToastSuccess","buyCount","setBuyCount","product","queryConfig","page","limit","category","_id","productList","getProductList","enabled","Boolean","imageRef","currentImagesIndex","setCurrentImageIndex","imageActived","setImageActived","currentImagesList","images","slice","addToCartMutation","mutationFn","body","addToCart","length","activeImage","img","prevSlice","prev","nextSlice","handleImageZoom","event","rect","currentTarget","getBoundingClientRect","image","current","naturalWidth","naturalHeight","offsetX","pageX","x","window","scrollX","offsetY","pageY","y","scrollY","top","height","left","width","style","maxWidth","handleRemoveZoom","_imageRef$current","removeAttribute","handleChangeQuantity","value","handleAddToCart","mutate","onSuccess","invalidateQueries","status","inCart","buyNow","res","mutateAsync","purchase","cart","state","purchaseId","className","children","name","fileName","_jsxFileName","lineNumber","columnNumber","content","description","limits","maxInputLength","onMouseMove","onMouseLeave","src","alt","ref","onClick","xmlns","fill","viewBox","strokeWidth","stroke","strokeLinecap","strokeLinejoin","d","map","isActive","onMouseEnter","rating","classNameStartFilled","classNameNonStartFilled","sold","price_before_discount","price","onDecrease","onIncrease","onType","max","quantity","product_id","buy_count","dangerouslySetInnerHTML","__html","sanitize","products","setShow","show","message","duration","_c","$RefreshReg$"],"sources":["/Volumes/MAC_Quandev03/Code/JS/ShopeeClone/ShopeeClone/src/pages/ProductDetail/ProductDetail.tsx"],"sourcesContent":["import { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport DOMPurify from 'dompurify';\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { productApi } from 'src/api/product.api';\nimport { purchasesApi } from 'src/api/purchases.api';\nimport ToastSuccess from 'src/components/CustomToast/ToastSuccess';\nimport ProductRating from 'src/components/ProductRating';\nimport QuantityController from 'src/components/QuantityController';\nimport { path } from 'src/constants/path';\nimport { purchasesStatus } from 'src/constants/purchases';\nimport { ProductListConfig, Product as ProductType } from 'src/@types/product.type';\nimport { ProductCart } from 'src/@types/purchases.type';\nimport { formatCurrency, formatNumberToSocialStyle, getIdFromNameId, saleRate } from 'src/utils/utils';\nimport Product from '../ProductList/components/Product';\nimport { useTranslation } from 'react-i18next';\nimport { Helmet } from 'react-helmet-async';\nimport { convert } from 'html-to-text';\n\nexport default function ProductDetail() {\n  const { t } = useTranslation('product');\n  const { nameId } = useParams();\n  const navigate = useNavigate();\n  const id = getIdFromNameId(nameId as string);\n  const queryClient = useQueryClient();\n  const { data: productDetailData } = useQuery({\n    queryKey: ['product', id],\n    queryFn: () => {\n      return productApi.getProduct(id as string);\n    }\n  });\n\n  const [showToastSuccess, setShowToastSuccess] = useState(false);\n\n  const [buyCount, setBuyCount] = useState(1);\n\n  const product = productDetailData?.data.data;\n\n  const queryConfig: ProductListConfig = { page: '1', limit: '20', category: product?.category._id };\n\n  const { data: productList } = useQuery({\n    queryKey: ['productListCategory', queryConfig],\n    queryFn: () => {\n      return productApi.getProductList(queryConfig);\n    },\n    enabled: Boolean(product)\n  });\n\n  const imageRef = useRef<HTMLImageElement>(null);\n\n  const [currentImagesIndex, setCurrentImageIndex] = useState([0, 5]);\n\n  const [imageActived, setImageActived] = useState('');\n\n  const currentImagesList = useMemo(() => {\n    return (product as ProductType)?.images.slice(...currentImagesIndex);\n  }, [product, currentImagesIndex]);\n\n  const addToCartMutation = useMutation({\n    mutationFn: (body: ProductCart) => {\n      return purchasesApi.addToCart(body);\n    }\n  });\n\n  useEffect(() => {\n    if (product && product.images.length) {\n      setImageActived(product.images[0]);\n    }\n  }, [product]);\n\n  const activeImage = (img: string) => {\n    setImageActived(img);\n  };\n\n  const prevSlice = () => {\n    if (currentImagesIndex[0] <= 0) return;\n\n    setCurrentImageIndex((prev) => [prev[0] - 1, prev[1] - 1]);\n  };\n\n  const nextSlice = () => {\n    if (currentImagesIndex[1] >= (product as ProductType)?.images.length) return;\n\n    setCurrentImageIndex((prev) => [prev[0] + 1, prev[1] + 1]);\n  };\n\n  const handleImageZoom = (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    const rect = event.currentTarget.getBoundingClientRect();\n\n    const image = imageRef.current as HTMLImageElement;\n    const { naturalWidth, naturalHeight } = image;\n\n    //Cách 1: Lấy offsetX và offsetY đơn giản trong trường hợp xử lý được bubble event\n    // const { offsetX, offsetY } = event.nativeEvent;\n\n    //Cách 2: Tính toán offsetX và offsetY trong trường hợp không xử lý được bubble event đối với element con, ví dụ trường hợp element con là một component được import bên ngoài vào element cha\n\n    const offsetX = event.pageX - (rect.x + window.scrollX);\n    const offsetY = event.pageY - (rect.y + window.scrollY);\n\n    const top = offsetY * (1 - naturalHeight / rect.height);\n    const left = offsetX * (1 - naturalWidth / rect.width);\n\n    image.style.width = naturalWidth + 'px';\n    image.style.height = naturalHeight + 'px';\n    image.style.maxWidth = 'unset';\n    image.style.top = top + 'px';\n    image.style.left = left + 'px';\n  };\n\n  const handleRemoveZoom = () => {\n    imageRef.current?.removeAttribute('style');\n  };\n\n  const handleChangeQuantity = (value: number) => {\n    setBuyCount(value);\n  };\n\n  const handleAddToCart = (body: ProductCart) => {\n    addToCartMutation.mutate(body, {\n      onSuccess: () => {\n        // toast.success('Thêm vào giỏ hàng thành công', { autoClose: 1000 });\n        // customToast.renderToastSuccess({ duration: 1000 });\n        setShowToastSuccess(true);\n        queryClient.invalidateQueries({ queryKey: ['purchasesCart', { status: purchasesStatus.inCart }] });\n      }\n    });\n  };\n\n  const buyNow = async (body: ProductCart) => {\n    const res = await addToCartMutation.mutateAsync(body);\n    const purchase = res.data.data;\n\n    navigate(path.cart, {\n      state: {\n        purchaseId: purchase._id\n      }\n    });\n  };\n\n  if (!product) return null;\n\n  return (\n    <div className='relative bg-gray-100 py-3'>\n      <Helmet>\n        <title>{product.name}</title>\n        <meta\n          name='description'\n          content={convert(product.description || '', {\n            limits: {\n              maxInputLength: 200\n            }\n          })}\n        />\n      </Helmet>\n\n      <div className='container bg-white shadow'>\n        <div className='grid grid-cols-12 gap-9'>\n          <div className='col-span-5'>\n            <div\n              className='relative w-full cursor-zoom-in overflow-hidden pt-[100%] shadow'\n              onMouseMove={handleImageZoom}\n              onMouseLeave={handleRemoveZoom}\n            >\n              <img\n                src={imageActived}\n                alt={product.name}\n                className='absolute left-0 top-0 h-full w-full  bg-white object-cover'\n                ref={imageRef}\n              />\n            </div>\n\n            <div className='relative mt-4 grid w-full grid-cols-5 gap-5'>\n              <button\n                onClick={prevSlice}\n                className='absolute left-0 top-1/2 z-10 h-9 w-5 -translate-y-1/2 bg-gray-200/60 font-semibold text-white'\n              >\n                <svg\n                  xmlns='http://www.w3.org/2000/svg'\n                  fill='none'\n                  viewBox='0 0 24 24'\n                  strokeWidth='{1.5}'\n                  stroke='currentColor'\n                  className='h-6 w-6'\n                >\n                  <path strokeLinecap='round' strokeLinejoin='round' d='M15.75 19.5L8.25 12l7.5-7.5' />\n                </svg>\n              </button>\n\n              {currentImagesList.map((image) => {\n                const isActive = image === imageActived;\n\n                return (\n                  <div\n                    className='relative w-full cursor-pointer pt-[100%]'\n                    key={image}\n                    onMouseEnter={() => activeImage(image)}\n                  >\n                    <img src={image} alt={image} className='absolute left-0 top-0 w-full object-contain' />\n                    {isActive && (\n                      <div className='absolute left-0 top-0 h-full w-full border border-orange bg-transparent' />\n                    )}\n                  </div>\n                );\n              })}\n\n              <button\n                onClick={nextSlice}\n                className='absolute right-0 top-1/2 z-10 h-9 w-5 -translate-y-1/2 bg-gray-200/60 font-semibold text-white'\n              >\n                <svg\n                  xmlns='http://www.w3.org/2000/svg'\n                  fill='none'\n                  viewBox='0 0 24 24'\n                  strokeWidth='{1.5}'\n                  stroke='currentColor'\n                  className='h-6 w-6'\n                >\n                  <path strokeLinecap='round' strokeLinejoin='round' d='M8.25 4.5l7.5 7.5-7.5 7.5' />\n                </svg>\n              </button>\n            </div>\n          </div>\n\n          <div className='col-span-7'>\n            <h1 className='text-xl font-medium uppercase'>{product.name}</h1>\n            <div className='my-4 flex items-center'>\n              <div className='flex items-center gap-1'>\n                <span className='mt-1 text-orange underline'>{product.rating}</span>\n                <ProductRating\n                  rating={product.rating}\n                  classNameStartFilled='h-4 w-4 fill-orange text-orange'\n                  classNameNonStartFilled='h-4 w-4 fill-current text-gray-300'\n                />\n              </div>\n\n              <div className='mx-4 h-6 w-[1px] bg-gray-300' />\n\n              <div>\n                <span>{formatNumberToSocialStyle(product.sold)}</span>\n                <span className='ml-1 text-sm capitalize text-gray-500'>{t('sold')}</span>\n              </div>\n            </div>\n\n            <div className='flex items-center bg-gray-100 px-6 py-4'>\n              <span className='text-gray-500 line-through'>₫{formatCurrency(product.price_before_discount)}</span>\n\n              <div className='ml-3 text-3xl text-orange'>₫{formatCurrency(product.price)}</div>\n\n              <div className='ml-5 rounded-sm bg-orange px-1 text-sm font-semibold uppercase text-white'>\n                <span>{saleRate(product.price_before_discount, product.price)} </span>\n                {t('off')}\n              </div>\n            </div>\n\n            <div className='mt-6 flex items-center'>\n              <span className='capitalize text-gray-500'>{t('quantity')}</span>\n\n              <QuantityController\n                onDecrease={handleChangeQuantity}\n                onIncrease={handleChangeQuantity}\n                onType={handleChangeQuantity}\n                value={buyCount}\n                max={product.quantity}\n              />\n\n              <span className='ml-5 text-gray-500'>\n                {product.quantity} {t('pieces available')}\n              </span>\n            </div>\n\n            <div className='mt-6 flex items-center gap-4'>\n              <button\n                onClick={() => {\n                  handleAddToCart({ product_id: id, buy_count: buyCount });\n                }}\n                className='flex-items-center flex gap-2 rounded-sm border border-orange bg-orange/10 px-5 py-3 capitalize text-orange hover:bg-orange/20'\n              >\n                <svg\n                  xmlns='http://www.w3.org/2000/svg'\n                  fill='none'\n                  viewBox='0 0 24 24'\n                  strokeWidth='{1.5}'\n                  stroke='currentColor'\n                  className='h-5 w-5'\n                >\n                  <path\n                    strokeLinecap='round'\n                    strokeLinejoin='round'\n                    d='M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z'\n                  />\n                </svg>\n                {t('add to cart')}\n              </button>\n\n              <button\n                onClick={() => {\n                  buyNow({ product_id: id, buy_count: buyCount });\n                }}\n                className='rounded-sm bg-orange px-5 py-3 capitalize text-white hover:bg-orange/80'\n              >\n                {t('buy now')}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className='container mt-4 bg-white'>\n        <div className='bg-gray-100/40 p-3 text-lg uppercase'>{t('product description')}</div>\n\n        <div className='p-3 text-sm leading-loose'>\n          <div dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(product.description as string) }} />\n        </div>\n      </div>\n      <div className='container mt-4'>\n        {productList && (\n          <div>\n            <div className='uppercase text-gray-500'>{t('you may also like')}</div>\n            <div className='mt-8 grid grid-cols-2 gap-4 sm:grid-cols-3 lg:grid-cols-5 xl:grid-cols-6'>\n              {productList.data.data.products.map((product) => (\n                <Product key={product._id} product={product} />\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n\n      <ToastSuccess\n        setShow={setShowToastSuccess}\n        show={showToastSuccess}\n        message='Sản phẩm đã được thêm vào Giỏ hàng'\n        duration={1500}\n      />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}